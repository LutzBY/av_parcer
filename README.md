Привет!

В корне папки с иполняемыми скриптами должен содержаться файл config.json с кредами базы и почтами для отправки отчета
Также должен содержаться файл exceptions.json к которому обращаются скрипты для получения списка стран, марок и продавцов для логики исключений и флагов
Бекап на данный момент выполняется с помощью pg_dump по расписанию на уровне виртуальной машины строкой "pg_dump -U user -d testdb -Z 9 > /mnt/backup/backup-$(date +%d-%m-%y-%H-%M-%S).gz"
Реализован автоматический гит пуллер на виртуальной машине (раз в сутки)

------
Папка dev содержит рабочие промежуточные файлы
------
avparser - скрипт парсера moto.av.by. Получает json страницы через BS4 b requests, корректирует полученные данные. Выполняет дополнение vlk (более точное описание модели по референс-базе). Выполняет проверку на дубликаты в базе (есть ли аналогичные объявления от такого же человека), выводит их в удобном виде для ручной проверки. Пишет получшенное в базу на postgresql. Собирает дополнительную информацию для отчета и формирует отчет в виде html с картинками и статистикой. Отсылает этот отчет на указанные в config адреса. Запускается два раза в день по расписанию в автоматическом режиме

actcheck - скрипт актуализации и дополнения данных в базе. Выбирает строки для проверки актуальности объявлений (проверка на закрыто / продано и т.д.). Выполняет автопроверку на дубликаты в базе (есть ли аналогичные объявления от такого же человека) и помечает их. Получает номера телефонов продавца по api. Собирает историю изменения цен.
После завершения формирует отчет и направляет его на указанные в config почты.
Дополнительно, при обнаружении новых юрлиц, которых еще нет в отдельной базе, проводит парсинг информации по недостающим.

onlparser - простой парсер moto.onliner.by. Пишет в постгре, отчитывается на почту

gui_redactor - утилитка с gui для ручного обслуживания и корректирования базы. Позволяет запустить функцию поиска vlk по искомому id, записать / скопировать новое vlk, установить флаги, удалить запись. Имеется функция пометки дубликатов и изменения определенных значений с последующим поиском vlk заново. Утилитка для упрощение регулярной ручной работы, правка ошибок ввода пользователей, изменение неправильно присвоенного влк, метки дубликатов.

------



